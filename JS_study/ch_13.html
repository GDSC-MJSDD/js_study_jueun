13장 스코프
- 유효범위
- var, let, const 변수의 스코프는 다르게 동작한다.
- 변수 선언 시 코드블록, 함수 중첩 가능
- 선언된 위치에 따라 변수가 유효한 범위, 즉 스코프가 결정된다.
- 식별자 결정: 스코프를 통해 어떤 식별자를 참조할지 결정하는 것
- 식별자는 유일해야 한다. 다만 디렉토리와 같은 개념을 통해 스코프를 달리 해 같은 이름의 식별자를 사용할 수 있다.
- 같은 스코프에서 var val = 1; var val = 2; 하면 자바스크립트엔진은 뒤의 var을 무시하고 val에 2를 덮어씌운다.
- let, const는 위와 달리 중복선언 불가하다.

1. 스코프 종류
- 전역: 코드의 가장 바깥 영역 > 전역변수는 어디서든 참조 가능
- 지역: 함수 내부 > 지역변수는 자신의 지역 스코프와 하위 지역 스코프에서 유효

2. 스코프 체인
- 중첩함수: 함수 몸체 내부에서 정의된 함수
- 외부함수: 함수를 포함하는 함수
- 이렇듯 함수를 선언하면 스코프는 계층적 구조를 가지게 된다. 전역 > 외부함수 > 내부함수
- 위와같은 계층적 연결을 스코프 체인이라 한다.
- 자바스크립트 엔진은 스코프 체인의 하위 스코프(내부함수)부터 상위 스코프(전역)로 이동하며 선언된 변수를 검색한다.
*렉시컬 환경? 공부하고 보충하기
- 함수 또한 식별자에 해당하므로 스코프를 갖는다.

3. 함수 레벨 스코프(var 키워드로 선언된 변수에 해당)
- 지역 스코프는 코드블록이 아닌 함수에 의해서만 생성된다.
- 이는 블록레벨스코프를 채택하는 다른 언어와 구분되는 점이다.
*ES6부터 let, const는 블록 레벨 스코프를 지원한다.

4. 동적 스코프와 정적 스코프(렉시컬 스코프)
- 동적 스코프: 함수가 호출된 위치를 기준으로 스코프 결정
- 렉시컬 스코프: 함수가 정의된 위치를 기준으로 스코프 결정
- 자바스크립트는 렉시컬 스코프를 따른다. 그러므로 자신이 정의된 함수의 스코프가 상위 스코프이다.
ex. ===
var x = 1;
function foo() {
var x = 10;
bar(); }
function bar () { // 렉시컬 스코프이므로 함수 스코프는 전역
console.log(x); }
foo();
bar();
===
위의 코드를 실행하면 1이 두 번 실행된다. 이는 bar의 상위 스코프가 전역이므로 bar은 전역변수 x를 사용하기 때문이다.
아무리 foo() 가 x를 지역변수로 가지고 있더라도 foo는 bar의 상위 스코프가 아니므로 x = 10은 전혀 상관 없다.
