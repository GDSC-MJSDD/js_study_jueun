23장 실행 컨텍스트
: 자바스크립트의 동작 원리를 담고 있는 핵심 개념

1. 소스코드의 타입 (네 타입 모두 평가 > 실행 컨텍스트 생성)
1) 전역 코드: 전역에 존재하는 코드, 함수, 클래스 등 내부 코드는 미포함
- 전역 스코프 생성
- 전역 변수, 전역 함수를 전역 객체와 연결. > 전역객체의 프로퍼티, 메소드로 바인딩, 참조 가능해짐
- 전역 실행 컨텍스트

2) 함수 코드: 함수 내부에 존재하는 코드, 함수 안의 중첩 함수, 클래스 등 내부 코드 미포함
- 지역 스코프 생성
- 지역변수, 매개변수, arguments 객체 관리
- 지역 스코프 스코프 체인에 연결
- 함수 실행 컨텍스트

3) eval 코드: 빌트인 저역 함수인 eval 함수에 인수로 전달되어 실행되는 소스코드
- strict mode에서 자신만의 독자적인 스코프 생성.
*strict mode: 안전한 코딩을 위한 가이드라인. 'use strict';를 이용해 적용한다.

4) 모듈 코드: 모듈 내부에 존재하는 코드. 안의 함수, 클래스 등 내부 코드 미포함
- 모듈 별로 독립적인 모듈 스코프 생성
- 모듈 실행 컨텍스트


2. 소스코드의 평가와 실행
- 자바스크립트 엔진: 1. 소스코드의 평가 2. 소스코드의 실행 두 과정으로 소스코드 처리
- 소스코드 평가(변수 선언문만 먼저 실행해 스코프에 등록) > 실행 컨텍스트 생성 > 소스코드 실행 (실행컨텍스트와 소스코드의 실행은 서로 영향)


3. 실행 컨텍스트의 역할
- 스코프: 식별자의 스코프 구분, 등록, 상태변화(*바인딩) 관리
- 스코프 체인으로 연결
- 코드의 실행 순서 변경


*실행컨텍스트의 요소
- 실행 컨텍스트 스택: 코드의 실행 순서 관리
- 렉시컬 환경: 스코프와 식별자 관리

4. 실행 컨텍스트 스택
- 실행 컨텍스트는 스택 자료구조로 관리된다.
- 이는 코드의 실행 순서를 관리한다.
- 실행컨텍스트는 아래에서 위로 쌓이며 실행컨텍스트 최상위스택에 있는 것은 현재 실행중인 코드의 실행컨텍스트이다.


5. 렉시컬 환경
- 식별자, 식별자에 바인딩된 값, 상위스코프에 대한 참조를 기록하는 자료구조
- 실행 컨텍스트를 구성하는 컴포넌트
- 렉시컬 환경의 컴포넌트: 환경 레코드(스코프의 식별자 등록, 등록된 식별자에 바인딩된 값 관리),
외부 렉시컬 환경에 대한 참조(상위스코프, 상위코드의 렉시컬 환경 > 스코프 체인 구성)


6. 실행 컨텍스트 생성과 식별자 검색 과정
- 전역 객체: 전역코드 평가 이전 생성, 프로토타입 체인의 일원


<코드의 평가시 실행 컨텍스트 생성 과정>
    1 전역 실행 컨텍스트
    1) 렉시컬 환경
    ㄱ. 전역 환경 레코드
    ㄱ) 객체 환경 레코드 : 값-var로 선언한 변수들
    ㄴ) 선언적 환경 레코드 : 값-let, const로 선언한 변수들
    ㄴ. this 바인딩: 전역 this 값
    ㄷ. 외부 렉시컬 환경에 대한 참조 : 값-null (최상위스코프이므로)
    2 함수 실행 컨텍스트 (함수 호출 시 함수 코드 평가 실행됨)
    1) 렉시컬 환경
    ㄱ. 함수 환경 레코드 : 값-매개변수, arguments, 변수들
    ㄴ. this 바인딩
    ㄷ. 외부 렉시컬 환경에 대한 참조 : 상위 실행 컨텍스트의 렉시컬 환경


    실행컨텍스트는 다음과 같은 구조를 가지며 실행되는 순서대로 아래로부터 스택에 차곡차곡 쌓인다.


    7. 실행컨텍스트와 블록레벨 스코프
    - 블록레벨스코프의 경우 실행컨텍스트를 생성하지 않는다
    - 기존의 실행컨텍스트의 전역 렉시컬 환경 대신 블록 렉시컬 환경을 생성해 실행컨텍스트에 연결한다.
    - 코드블록 종료 후 실행컨텍스트에는 블록 렉시컬 환경과의 연결이 끊어지고 이전과 같이 전역 렉시컬 환경이 연결된다.



    ***리뷰
    - this바인딩에 대한 이해 부족
    - 책을 반권정도 본 후 실행 컨텍스트 파트 다시 공부할 것
    